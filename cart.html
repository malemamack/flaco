<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>flaco Jeans Clothing</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <link rel="stylesheet" href="	https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" />

</head>
<body>
    
    <!-- <section id="header">
        <a href=""><img src="images/logo.jpg" height="35px" alt="logo" class="logo" style="border-radius: 20px;" ></a>

        <div>
            <ul id="navbar">
                <li><a  href="index.html">Home</a></li>
                <li><a href="collection.html">Our Collection</a></li>
                <li><a  href="about.html">About</a></li>
                <li><a  href="contact.html">Contact</a></li>
                <li id="lg-bag"><a class="active"  href="cart.html"><i class="fa-solid fa-cart-shopping"></i></a></li>
                <a href="#" id="close" > <i class="far fa-times"></i></a>
            </ul>
        </div>

        <div id="mobile">
            <a href="cart.html"><i class="fa-solid fa-cart-shopping"></i></a>
            <i id="bar" class="fas fa-outdent" onclick="toggleMenu()"> </i>
        </div>


    </section> -->

     <!-- Header Section -->
<section id="header">
    <a href="#" style="margin-left: 0px;">
        <img src="images/logo.jpg" style="border-radius: 20px;" height="35px" alt="logo" class="logo">
    </a>

    <div id="menu-container">
        <ul id="navbar">
            <li><a  href="index.html">Home</a></li>
            <li><a  href="collection.html">Collection</a></li>
            <li><a href="about.html">About</a></li>
            <li><a  href="contact.html">Contact</a></li>
            <li><a class="active" href="cart.html"><i class="fa-solid fa-cart-shopping"></i></a></li>
        </ul>

        <div id="mobile">
            <i id="bar" class="fa-solid fa-bars"></i>
        </div>
    </div>
</section>

<section id="page-header" class="about-header" style="background-image: url(images/1a.jpg);">
        
    </div>
    <h2>#Your Shopping Cart</h2>
    <h1>Cart Summary Section!</h1>
    <p>Review your items below before proceeding to checkout. Adjust quantities if needed, and make sure everything looks good!</p>
    
</section>

<section id="cart" class="section-p1">
        <div id="empty-cart-message">
            <p>Your cart is empty. <a href="index.html">Home</a></p>
            <a href="collection.html" class="browser-btn">Browse Our Collection</a>
        </div>
    
        <table width="100%">
            <thead>
                <tr>
                    <td>Remove</td>
                    <td>Product</td>
                    <td>Size</td>
                    <td>Price</td>
                    <td>Quantity</td>
                    <td>Subtotal</td>
                </tr>
            </thead>
            <tbody id="cart-body">
                <!-- Cart Items Will Be Dynamically Populated Here -->
            </tbody>
        </table>
    
        <section class="section-p1" >
            <div id="subtotal">
                <h3>Cart Total</h3>
                <table>
                    <tr>
                        <td>Total</td>
                        <td id="total-amount"><strong>R0.00</strong></td>
                    </tr>
                </table>
            </div>
    
            <form id="checkout-form">
                <h3>Delivery Details</h3>
                <input type="text" id="name" placeholder="Name" required> <br><br>
                <input type="text" id="surname" placeholder="Surname" required><br><br>
                <input type="tel" id="phone" placeholder="Phone" required> <br><br>
                <textarea id="address" placeholder="Delivery Address" rows="3" required></textarea> <br><br>
                <button type="submit" class="normal">Proceed to Checkout</button>
            </form>
        </section>
</section>
    
    
<footer class="section-p1">
    <div class="col">
        <img src="images/logo.jpg" alt="logo" height="35px" class="logo" style="float: left; border-radius: 20px;">
        <h4>Contact</h4>
        <a href="https://maps.app.goo.gl/xCmrUs5QUh2kxeUT9"><strong><i class="fa-solid fa-location-dot"></i></strong> 30201 Mentz Malesa, Polokwane, Limpopo Ga-Mamabolo,0727, South Africa</a>
        

        <a href="tel:+27670421694" ><strong><i class="fa-solid fa-phone"></i></strong>: +27 67 042 1694</a>
        <p><strong><i class="fa-solid fa-truck"></i>:</strong> 2-3 working days, free local, R100 Outside Polokwane </p>
        
    </div>

    <div class="col">
        <h4>About</h4>
        <a href="index.html">Home</a>
        <a href="about.html">About Us</a>
        <a href="contact.html">Contact Us</a>
        <a href="collection.html">Our Collection</a>
        <a href="cart.html">View Cart</a>
    </div>

    <div class="col">
        <div class="social-icons"> 
            <h4>Connect with us on:</h4>
            <a href="https://www.instagram.com/flaco_jeans_clothing"><i style="font-size: 40px;" class="fab fa-instagram" style="font-size: 40px;"></i></a>
            <a href="https://www.facebook.com/flaco jeans." style="font-size: 40px;"><i class="fab fa-facebook"></i></a>
           
            <a href="https://wa.me/+27670421694" target="_blank"><i  style="font-size: 40px;" class="fab fa-whatsapp"></i></a> <br>

            <p>&copy; 2024 Flaco Jeans. All rights reserved.</p>
        </div>
    </div>

    <!-- <div class="copyright"> -->
        
    <!-- </div> -->
</footer>

<script src="javascript/script.js"></script>

<script>
// Retrieve cart from localStorage or initialize an empty array
const cart = JSON.parse(localStorage.getItem('cart')) || [];

// DOM elements
const cartBody = document.getElementById('cart-body');
const totalAmountElement = document.getElementById('total-amount');

// Update Cart Display
function updateCart() {
    cartBody.innerHTML = ''; // Clear existing cart items
    let totalAmount = 0;

    if (cart.length === 0) {
        document.getElementById('empty-cart-message').style.display = 'block';
    } else {
        document.getElementById('empty-cart-message').style.display = 'none';
    }

    cart.forEach((item, index) => {
        const price = parseFloat(item.price);
        const quantity = parseInt(item.quantity);
        const subtotal = price * quantity;

        const row = document.createElement('tr');
        row.innerHTML = `
            <td><button onclick="removeItem(${index})"><i class="fa-solid fa-minus"></i></button></td>
            <td>
                <a href="product-detail.html?id=${encodeURIComponent(item.id)}">
                    <img src="${item.image}" width="50" alt="${item.name}">
                </a>
                ${item.name}
            </td>
            <td>
                <select onchange="updateSize(${index}, this.value)">
                    <option value="XL" ${item.size === 'XL' ? 'selected' : ''}>XL</option>
                    <option value="XXL" ${item.size === 'XXL' ? 'selected' : ''}>XXL</option>
                    <option value="Small" ${item.size === 'Small' ? 'selected' : ''}>Small</option>
                    <option value="Large" ${item.size === 'Large' ? 'selected' : ''}>Large</option>
                    <option value="Medium" ${item.size === 'Medium' ? 'selected' : ''}>Medium</option>
                </select>
            </td>
            <td>R${price.toFixed(2)}</td>
            <td>
                <input type="number" min="1" value="${quantity}" onchange="updateQuantity(${index}, this.value)">
            </td>
            <td id="subtotal-${index}">R${subtotal.toFixed(2)}</td>
        `;

        cartBody.appendChild(row);
        totalAmount += subtotal;
    });

    totalAmountElement.textContent = `R${totalAmount.toFixed(2)}`;
}

// Update quantity when changed
function updateQuantity(index, newQuantity) {
    const quantity = parseInt(newQuantity) || 1;
    cart[index].quantity = quantity;
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCart();
}

// Update size when changed
function updateSize(index, newSize) {
    cart[index].size = newSize;
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCart();
}

// Remove item from cart
function removeItem(index) {
    cart.splice(index, 1);
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCart();
}

// Checkout Form Submission
document.getElementById('checkout-form').addEventListener('submit', function (e) {
    e.preventDefault();

    const name = document.getElementById('name').value;
    const surname = document.getElementById('surname').value;
    const phone = document.getElementById('phone').value;
    const address = document.getElementById('address').value;

    let orderMessage = `Order Summary:\n`;
    cart.forEach(item => {
        const subtotal = parseFloat(item.price) * parseInt(item.quantity);
        orderMessage += `${item.name} (Size: ${item.size}) - Qty: ${item.quantity} - Subtotal: R${subtotal.toFixed(2)}\n`;
    });
    orderMessage += `Total: ${totalAmountElement.textContent}\n`;
    orderMessage += `Customer: ${name} ${surname}\nPhone: ${phone}\nAddress: ${address}`;

    const whatsappNumber = '+27765668747'; // Replace with your number
    const whatsappURL = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(orderMessage)}`;

    window.open(whatsappURL, '_blank');
});

// Initialize cart on page load
updateCart();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

<script defer src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" integrity="sha384-rOA1PnstxnOBLzCLMcre8ybwbTmemjzdNlILg8O7z1lUkLXozs4DHonlDtnE7fpc" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script>

</body>
</html>